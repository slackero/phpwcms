/*!
 * phpwcms content management system
 *
 * @author Oliver Georgi <og@phpwcms.org>
 * @copyright Copyright (c) 2002-2022, Oliver Georgi
 * @license http://opensource.org/licenses/GPL-2.0 GNU GPL-2
 * @link http://www.phpwcms.org
 *
 */
var imageBrowser,uploadWin,temp_url;function login(e){return"2"==e.json.value?(e.customlang.value=1,e.submit(),!0):(e.json.value=0,e.form_password.value&&e.form_loginname.value?(e.md5pass.value=hex_md5(e.form_password.value),e.form_password.value="",e.json.value=1,!0):(showLayer("jserr"),!1))}function MM_findObj(e,t){var n,a,o;for(t||(t=document),(n=e.indexOf("?"))>0&&parent.frames.length&&(t=parent.frames[e.substring(n+1)].document,e=e.substring(0,n)),!(o=t[e])&&t.all&&(o=t.all[e]),a=0;!o&&a<t.forms.length;a++)o=t.forms[a][e];for(a=0;!o&&t.layers&&a<t.layers.length;a++)o=MM_findObj(e,t.layers[a].document);return!o&&t.getElementById&&(o=t.getElementById(e)),o}function MM_swapImage(){var e,t,n=0,a=MM_swapImage.arguments;for(document.MM_sr=[],e=0;e<a.length-2;e+=3)null!=(t=MM_findObj(a[e]))&&(document.MM_sr[n++]=t,t.oSrc||(t.oSrc=t.src),t.src=a[e+2])}function clearText(e){e.defaultValue==e.value&&(e.value="")}function confirmGoUrl(e,t){confirm(e)&&(location.href=t)}function wordcount(e){var t=Trim(e);return""==t?0:(t=t.split(" ")).length}function LTrim(e){var t=new String(" \t\n\r"),n=new String(e);if(-1!=t.indexOf(n.charAt(0)))for(var a=0,o=n.length;a<o&&-1!=t.indexOf(n.charAt(a));)a++,n=n.substring(a,o);return n}function RTrim(e){var t=new String(" \t\n\r"),n=new String(e);if(-1!=t.indexOf(n.charAt(n.length-1)))for(var a=n.length-1;a>=0&&-1!=t.indexOf(n.charAt(a));)a--,n=n.substring(0,a+1);return n}function Trim(e){return RTrim(LTrim(e))}function set_chatlist(e){document.sendchatmessage.chatlist.value=e,document.sendchatmessage.submit()}function flevPopupLink(){var e=arguments,t=window.open(e[0],e[1],e[2]),n=e.length>3&&e[3];n&&t.focus(),document.MM_returnValue=!1}function MM_showHideLayers(){var e,t,n,a=MM_showHideLayers.arguments;for(e=0;e<a.length-2;e+=3)null!=(n=MM_findObj(a[e]))&&(t=a[e+2],n.style&&(n=n.style,t="show"==t?"visible":"hide"==t?"hidden":t),n.visibility=t)}function tmt_winOpen(u,id,f,df){null==eval(id)||eval(id+".closed")?(eval(id+"=window.open('"+u+"','"+id+"','"+f+"')"),eval(id+".focus()")):(df||eval(id+"=window.open('"+u+"','"+id+"','"+f+"')"),eval(id+".focus()"))}function tmt_winControl(id,c){var d=null==eval(id)||eval(id+".closed");d||eval(id+"."+c)}function get_cookie(e){var t=e+"=";if(document.cookie.length>0){var n=document.cookie.indexOf(t);if(-1!==n){n+=t.length;var a=document.cookie.indexOf(";",n);return-1===a&&(a=document.cookie.length),decodeURIComponent(document.cookie.substring(n,a))}}return""}function write_cookie(e){window.document.cookie="chatstring="+(e?window.document.sendchatmessage.chatmsg.value:"")}function cut(e,t){e.value.length>t&&(e.value=e.value.substr(0,t))}function changeImagePos(e,t){t?document.article.cimage_pos.selectedIndex=e:document.articlecontent.cimage_pos.selectedIndex=e;for(var n=0;n<=9;n++)MM_swapImage("imgpos"+n,"",n===e?"img/symbole/content_selected.gif":"img/leer.gif",0)}function changeImagePosMenu(e){for(var t=e?document.article.cimage_pos.selectedIndex:document.articlecontent.cimage_pos.selectedIndex,n=0;n<=9;n++)MM_swapImage("imgpos"+n,"",n===t?"img/symbole/content_selected.gif":"img/leer.gif",0);e?document.article.cimage_pos.focus():document.articlecontent.cimage_pos.focus()}function switchToggleFTP(e){return parseInt(e.value,10)?0:1}function toggleAllFTP(e,t){for(var n=0;n<e.length;n++)e[n].checked=!!t}function int_only(e){return(e=parseInt(e,10))<0&&(e*=-1),e.toString(10)}function hideLayer(e){toggleDisplayById(e,"none")}function showLayer(e){toggleDisplayById(e,"")}function toggleDisplayById(e,t){document.getElementById?document.getElementById(e).style.display=t:document.all?document.all[e].style.display=t:document.layers&&(document.layers[e].display=t)}function doMapChange(){document.articlecontent.cmap_location_edited.value="1"}function subrstr(e,t){return e.substr(e.length-t)}function setCursorPos(e){e.createTextRange&&(e.cursorPos=document.selection.createRange().duplicate())}function insertAtCursorPos(e,t){if(e.focus(),document.all)if(e.createTextRange&&e.cursorPos){var n=e.cursorPos;n.text=" "===n.text.charAt(n.text.length-1)?t+" ":t}else e.value=e.value+t;else if(e.setSelectionRange){var a=e.selectionStart,o=e.selectionEnd,r=e.value.substring(0,a),l=e.value.substring(o);e.value=r+t+l}else alert("This version of Mozilla based browser does not support setSelectionRange")}function getFieldById(e){return document.getElementById&&null!=document.getElementById(e)?document.getElementById(e):document.layers&&null!=document.layers[e]?document.layers[e]:!document.all||document.all(e)}function getObjectById(e){return document.getElementById&&null!=document.getElementById(e)?document.getElementById(e):document.layers&&null!=document.layers[e]?document.layers[e]:!!document.all&&document.all(e)}function switchDisabled(e){return e.disabled=!e.disabled,!1}function enableStatusMessage(e,t,n){var a;if(document.getElementById&&null!=document.getElementById(e))a=document.getElementById(e);else{if(!document.layers||null==document.layers[e])return!0;a=document.layers[e]}return n&&(a.innerHTML=n),a.style.display=t?"block":"none",!0}function create_alias(e,t,n){if(e=(e=(e=(e=(e=(e=(e=e.toUpperCase()).toLowerCase()).replace(/\[br\]/g," ")).replace(/__/g," ")).replace(/\s+/g,"-")).replace(/[\?\+#=]/g,"-")).replace(/-+\/+-+/g,"/"),aliasUtf8?e=aliasAllowSlashes?e.replace(/[^a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF0-9_\-\/\.]+/g,""):(e=e.replace("/","-")).replace(/[^a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF0-9_\-\.]+/g,""):(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[\u00E0\u00E1\u00E2\u00E3\u00E5]/g,"a")).replace(/[\u00E7]/g,"c")).replace(/[\u00E8\u00E9\u00EA\u00EB]/g,"e")).replace(/[\u00EC\u00ED\u00EE\u00EF]/g,"i")).replace(/[\u00F2\u00F3\u00F4\u00F5\u00F8]/g,"o")).replace(/[\u00F9\u00FA\u00FB]/g,"u")).replace(/[\u00FD\u00FF]/g,"y")).replace(/[\u00F1]/g,"n")).replace(/[\u0153\u00F6]/g,"oe")).replace(/[\u00E6\u00E4]/g,"ae")).replace(/[\u00DF]/g,"ss")).replace(/[\u00FC]/g,"ue"),e=aliasAllowSlashes?e.replace(/[^a-z0-9_\-\/\.]+/g,""):(e=e.replace("/","-")).replace(/[^a-z0-9_\-\.]+/g,"")),e=(e=(e=(e=(e=(e=e.replace(/\-+/g,"-")).replace(/\/+/g,"/")).replace(/_+/g,"_")).replace(/^-+|-+$/g,"")).replace(/^\/+|\/+$/g,"")).replace(/^-+|-+$/g,""),1==n){var a=e.charAt(0);e=a.toUpperCase()+e.slice(1)}return e}var fbw=450,fbh=575;function openFileBrowser(e){null!=e&&""!==e&&(window.imageBrowser&&temp_url!==e&&tmt_winControl("imageBrowser","close()"),tmt_winOpen(e,"imageBrowser","width="+fbw+",height="+fbh+",left=8,top=8,scrollbars=yes,resizable=yes",1),temp_url=e)}function set_article_alias(e,t,n){var a="article_title",o="article_alias";"struct"===t&&(a="acat_name",o="acat_alias");var r=getObjectById(o);if(e&&""!==r.value)return!1;var l=getObjectById(a);return r.value=create_alias((n?n+"/":"")+l.value),!1}function flush_image_cache(e,t){return e.addClass("ajax-running"),new Ajax(t,{method:"get",onComplete:function(){e.removeClass("ajax-running")}}).request(),!1}void 0!==screen.width&&(fbw=Math.ceil(Math.max(screen.width/5,fbw))),void 0!==screen.height&&(fbh=Math.ceil(Math.max(screen.height/2,fbh)));var autosizeTextareas=[];"undefined"==typeof jQuery?window.addEvent("domready",(function(){(autosizeTextareas=$$("textarea.autosize")).length&&autosize(autosizeTextareas)})):$((function(){(autosizeTextareas=$("textarea.autosize")).length&&autosize(autosizeTextareas)}));var validation={isEmailAddress:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},isNotEmpty:function(e){return/\S+/.test(e)},isNumber:function(e){return/^\d+$/.test(e)},isSame:function(e,t){return e===t},isInt:function(e){return/^(\-?|\+?)\d+$/.test(e)}};function togglePasswordVisibility(e){var t=document.getElementById(e);return t.type="password"===t.type?"text":"password","text"===t.type?"hide":"show"}function copyToClipboard(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}